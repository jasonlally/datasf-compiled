<!DOCTYPE html>
<html lang="en">

  <head>
  <!-- Basic ================================================== -->
  <meta charset="utf-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  
  <!-- Mobile ================================================== -->
  <meta name="HandheldFriendly" content="True">
  <meta name="MobileOptimized" content="320">
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
  
  <!-- Title and meta description================================================== -->
  <title>DataSF | Publishing</title>
  <meta name="description" content="Our mission is to empower use of the City and County of San Francisco's data. Our core product is SF OpenData, the official open data portal.">
  <!--<link rel="canonical" href="https://datasf.org/publishing/">-->
  
  <!-- Open Graph and Author Metas================================================== -->
  
  	<!-- Open Graph -->
	<meta property="og:locale" content="en_US">
	<meta property="og:type" content="article">
	<meta property="og:title" content="DataSF | Publishing">
	
	<meta property="og:url" content="https://datasf.org/publishing/">
	
	<meta property="og:site_name" content="DataSF">
	<!-- Twitter Cards -->
	<meta name="twitter:title" content="DataSF | Publishing">
	
	<meta name="twitter:site" content="@datasf">
	<meta name="twitter:creator" content="@datasf">
	
	<meta name="twitter:card" content="summary">
	<meta name="twitter:image:src" content="https://datasf.org/assets/img/">
	
	
  
  
  <!-- Custom Fonts ================================================== -->
  <link href="//maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
  <link href='https://fonts.googleapis.com/css?family=Alegreya:400italic,700italic,400,700|Montserrat:400,700' rel='stylesheet' type='text/css'>
  
  <!-- CSS ================================================== -->
  <link rel="stylesheet" href="/assets/css/vendor.css">
  <link rel="stylesheet" href="/assets/css/style.css">
  <link rel="stylesheet" href="/assets/css/syntax.css">
  <link rel="stylesheet" href="/assets/js/vendor/DataTables-1.10.7/Plugins-1.10.7/integration/bootstrap/3/dataTables.bootstrap.css">
  
  <!--[if lte IE 9]><script src="/assets/js/vendor/aight/aight.min.js"></script><![endif]-->
  <!-- D3 for charting (only need this on some pages -->
  <script src="/assets/js/vendor/d3.js"></script>

  <!--[if IE 8]><script src="/assets/js/vendor/aight/d3/d3.ie8.js"></script><![endif]-->
  
  <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
  <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
  <!--[if lt IE 9]>
    <script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
  <![endif]-->
  
  <!-- Scripts ================================================== -->
  <script src="/assets/js/vendor/modernizr.custom.94053.js"></script>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');

    ga('create', 'UA-53975719-3', 'auto');
    ga('send', 'pageview');
  </script>
  
  <script>window.jQuery || document.write('<script src="//code.jquery.com/jquery-2.2.3.min.js"><\/script>')</script>

<link href="//d3q1ytufopwvkq.cloudfront.net/0.14.0/formrenderer.css" rel="stylesheet" />
<script src="//d3q1ytufopwvkq.cloudfront.net/0.14.0/formrenderer.js"></script>
  
</head>

  
   <body  class="has-subnav" >
    <div class="nav-group navbar-fixed-top  navbar-shrink ">
  <div class="navbar navbar-mini navbar-static-top visible-sm visible-md visible-lg" role="region" aria-label="external links">
    <div class="container">
      <div class="collapse navbar-collapse" id="navbar-collapse-2">
        <ul class="nav navbar-nav navbar-right">
            
          <li class="">
            <a class=" " href="https://www.sfgov.org">SFGov</a>
          </li>
            
          <li class="">
            <a class=" " href="/coordinators/">Coordinator's Portal</a>
          </li>
            
          <li class="">
            <a class=" " href="/about/">About</a>
          </li>
            
          <li class="">
            <a class=" " href="http://support.datasf.org">Help</a>
          </li>
          
        </ul>
      </div>
    </div>
  </div>
  <nav class="navbar navbar-default navbar-static-top">
    <div class="container">
      <!-- Brand and toggle get grouped for better mobile display -->
      <div class="navbar-header page-scroll">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse-1">
          <span class="sr-only">Toggle navigation</span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
        <a class="navbar-brand page-scroll" href="/"><span class="brand"><span class="brand-highlight">Data</span>SF</span></a>
      </div>

      <!-- Collect the nav links, forms, and other content for toggling -->
      <div class="collapse navbar-collapse" id="navbar-collapse-1">
        <ul class="nav navbar-nav navbar-right">
            
          <li class="">
            <a class="  ext-sf-opendata " href="https://data.sfgov.org">Data Catalog</a>
          </li>
            
          <li class="">
            <a class=" " href="/showcase/">Showcase</a>
          </li>
            
          <li class="active">
            <a class="active " href="/publishing/">Publishing</a>
          </li>
            
          <li class="">
            <a class=" " href="/academy/">Academy</a>
          </li>
            
          <li class="">
            <a class=" " href="/resources/">Resources</a>
          </li>
            
          <li class="">
            <a class=" " href="/blog/">Blog</a>
          </li>
          
            
          <script>
          </script>
          <li class=" visible-xs utility-nav">
            <a class=" " href="https://www.sfgov.org">SFGov</a>
          </li>
            
          <script>
          </script>
          <li class=" visible-xs utility-nav">
            <a class=" " href="/coordinators/">Coordinator's Portal</a>
          </li>
            
          <script>
          </script>
          <li class=" visible-xs utility-nav">
            <a class=" " href="/about/">About</a>
          </li>
            
          <script>
          </script>
          <li class=" visible-xs utility-nav">
            <a class=" " href="http://support.datasf.org">Help</a>
          </li>
          
        </ul>
      </div>
      <!-- /.navbar-collapse -->
    </div>
    <!-- /.container-fluid -->
  </nav>
  
  <div class="navbar navbar-subnav navbar-static-top visible-sm visible-md visible-lg" role="region" aria-label="external links">
    <div class="container">
      <div class="collapse navbar-collapse" id="navbar-collapse-3">
        <ul class="nav navbar-nav navbar-right">
            
          <li class="active">
            <a class="active " href="/publishing/">Publishing Submission</a>
          </li>
            
          <li class="">
            <a class=" " href="/publishing/submission-guidelines/">Submission Guidelines</a>
          </li>
            
          <li class="">
            <a class=" " href="/publishing/guidelines/">Publishing Guidelines</a>
          </li>
            
          <li class="">
            <a class=" " href="/publishing/services/">Automation Services</a>
          </li>
            
          <li class="">
            <a class=" " href="/publishing/plans/">Plans</a>
          </li>
          
          
        </ul>
      </div>
    </div>
  </div>
  
</div>
    <section id="publishing">
  <div class="container">
    <div class="row">
      <div class="col-xs-12 section-heading-wrapper">
        <h1 class="section-heading bg-line">Publishing</h1>
        <p class="section-subheading">Get City data published on the data portal</p>
      </div>
    </div>
    <div class="row">
      <div class="col-md-8 col-sm-12 col-md-offset-2">
        <p class="lead">So you want to publish data on the City's <a href="https://data.sfgov.org">open data catalog</a>? Get started by following the instructions below and submitting the form. <a href="http://support.datasf.org/customer/portal/emails/new">Please contact us if you have any questions</a>.</p>
        <ul id="publishingList" class="custom-counter list-unstyled list-publishing">
          <li>
            <div class="well">
              <div class="list-todo"><a href="/publishing/submission-guidelines"><i class="fa fa-file-text-o fa-2x" aria-hidden="true"></i>Review the submission guidelines</a></div>
            </div>
          </li>
          <li>
            <div class="well">
              <div class="list-todo"><i class="fa fa-files-o fa-2x" aria-hidden="true"></i>Review the form below and gather necessary information</div>
            </div>
          </li>
          <li>
            <div class="well">
              <div class="list-todo"><i class="fa fa-paper-plane-o fa-2x" aria-hidden="true"></i> Fill out the form and click submit</div>
            </div>
          </li>
        </ul>
        <form data-formrenderer>This form requires JavaScript to complete.</form>

        <script>
          // Uncomment this line and set it to the CSS class that your website uses for buttons:
          FormRenderer.BUTTON_CLASS = 'btn btn-default'
          FormRenderer.t.errors.domain_invalid = 'Please enter an email at a valid City and County of SF domain'

          var oldValidate = FormRenderer.Validators.IdentificationValidator.validate;
          FormRenderer.Validators.IdentificationValidator.validate = function(model) {
            var oldValidationResult = oldValidate.apply(this, arguments);
            if (oldValidationResult) return oldValidationResult;
            if (!model.get('value.email').match(/@(sfgov.org|sfusd.edu|ucsf.edu|sfmta.com|sfwater.org|sfmta.org|sfdph.org|sfport.com|flysfo.com|sfdpw.org|sfenvironment.org|sfpl.org|dcyf.org|first5sf.org|sfcta.org)/)) {
              return 'domain_invalid';
            }
          }

          var SELECT_DATASET_FIELD_ID = '37534'
          var SELECT_DEPARTMENT_FIELD_ID = '34388'
          var TITLE_FIELD_ID = '37478'
          var DESCRIPTION_FIELD_ID = '37479'
          var CLASS_FIELD_ID = '37481'
          var INVENTORY_FIELD_ID = '37637'

          var datasetView
          var titleView
          var descriptionView
          var classificationView
          var inventoryIdView
          var selectedDepartment = ''

          var fr = new FormRenderer({
            "project_id": "fCgxNErrr16qKjFs"
          })

          fr.on('viewRendered', function(view) {
            if (view.optsLoaded) return;

            if (view.$el.hasClass('fr_response_field_dropdown') && view.model.id == SELECT_DEPARTMENT_FIELD_ID) {
              selectedDepartment = view.model.attributes.value
              view.model.on('change:value', function(field) {
                if (!datasetView) return
                selectedDepartment = field.attributes.value
                setDatasetField(datasetView, selectedDepartment)
              })
            }

            if (view.$el.hasClass('fr_response_field_text') && view.model.id == TITLE_FIELD_ID) {
              titleView = view
            }
            if (view.$el.hasClass('fr_response_field_paragraph') && view.model.id == DESCRIPTION_FIELD_ID) {
              descriptionView = view
            }
            if (view.$el.hasClass('fr_response_field_dropdown') && view.model.id == CLASS_FIELD_ID) {
              classificationView = view
            }
            if (view.$el.hasClass('fr_response_field_text') && view.model.id == INVENTORY_FIELD_ID) {
              inventoryIdView = view

              view.
              $el.
              find('input').
              prop('disabled', true)
            }


            if (view.$el.hasClass('fr_response_field_dropdown') && view.model.id == SELECT_DATASET_FIELD_ID) {
              datasetView = view
              view.model.set('value', '', {
                silent: true
              })

              view.
              $el.
              find('select').
              prop('disabled', true).
              find('option').
              val('').
              end()

              setDatasetField(view, selectedDepartment)

              view.model.on('change:value', function(field) {
                if (field.attributes.value !== '***Dataset not in inventory' && field.attributes.value !== '') {
                  $.getJSON("https://data.sfgov.org/resource/q6xv-9c3b.json?$where=department_or_division='" + encodeURIComponent(selectedDepartment) + "'+AND+dataset_name='" + encodeURIComponent(field.attributes.value) + "'", function(opts) {
                    titleView.model.set('value', opts[0].dataset_name)
                    descriptionView.model.set('value', opts[0].dataset_description)
                    classificationView.model.set('value', opts[0].data_classification)
                    inventoryIdView.model.set('value', opts[0].inventory_id)
                  })
                }
                else {
                  titleView.model.set('value', '')
                  descriptionView.model.set('value', '')
                  classificationView.model.set('value', '')
                  inventoryIdView.model.set('value', '')
                }

              })
            }
          })

          var setDatasetField = function(view, field) {
            $.getJSON("https://data.sfgov.org/resource/q6xv-9c3b.json?$where=department_or_division=+'" + encodeURIComponent(field) + "'+AND+NOT+publishing_status='Published'", function(opts) {
              view.optsLoaded = true;
              console.log(field)
              var arr = [{
                label: ''
              }]
              for (i in opts) {
                arr.push({
                  label: opts[i].dataset_name
                })
              }
              if (field !== '' && field) {
                arr.push({
                  label: '***Dataset not in inventory'
                })
              }
              else {
                arr.push({
                  label: 'Please select a department above first'
                })
              }
              view.model.set('field_options.options', arr)
              if (arr[0]) {
                view.model.set('value', arr[0].label, {
                  silent: true
                });
              }
              view.render()
            })
          }
        </script>
      </div>
    </div>
    <div class="row">
      <div class="col-sm-12">
        <div class="visible-sm-block visible-xs-block">
          <h2>Recently Published Datasets</h2>
          <div class="recent-datasets">

          </div>
        </div>
      </div>
    </div>
  </div>
</section>
    <footer>
  <div class="container extra-links">
    <div class="row text-center">
      <div class="col-md-4">

      </div>
      <div class="col-md-4">
        
        <ul class="list-inline social-buttons">
          
          <li><a href="http://twitter.com/datasf"><i class="fa fa-twitter"></i></a>
          </li>
          
          <li><a href="http://opendata.stackexchange.com/search?q=san+francisco"><i class="fa fa-stack-overflow"></i></a>
          </li>
          
          <li><a href="http://github.com/datasf"><i class="fa fa-github"></i></a>
          </li>
          
        </ul>
        
      </div>
      <div class="col-md-4">
        <ul class="list-inline quicklinks">

        </ul>
      </div>
    </div>
  </div>
  <div class="footer-content-wrapper">
    <div class="container">
      <div class="row">
        <div class="col-sm-3 col-md-4 left-border-dotted">
          <ul class="list-unstyled quick-links">
              
              <li class="">
                <a class="  ext-sf-opendata " href="https://data.sfgov.org">Data Catalog</a>
              </li>
              
              <li class="">
                <a class=" " href="/showcase/">Showcase</a>
              </li>
              
              <li class="active">
                <a class="active " href="/publishing/">Publishing</a>
              </li>
              
              <li class="">
                <a class=" " href="/academy/">Academy</a>
              </li>
              
              <li class="">
                <a class=" " href="/resources/">Resources</a>
              </li>
              
              <li class="">
                <a class=" " href="/blog/">Blog</a>
              </li>
            
            
              <li style="margin-top: 15px;"><a href="/privacy/">Privacy Policy</a></li>
            
          </ul>
        </div>
        <div class="col-md-6 mission">
          <p>DataSF's mission is to empower use of data. We seek to transform the way the City works through the use of data. We believe use of data and evidence can improve our operations and the services we provide. This ultimately leads to increased quality of life and work for San Francisco residents, employers, employees and visitors. <a href="/about">Learn more about our work.</a></p>
        </div>
      </div>
    </div>
  </div>
  
  <div class="text-center made-in">
    Made with <i class="fa fa-heart"><span class="sr-only">heart</span></i> in San Francisco
  </div>
  
</footer>
    <!-- jQuery Version 1.11.3 -->
<script src="/assets/js/vendor/jquery-1.11.3.min.js"></script>
<!-- Bootstrap Core JavaScript -->
<script src="/assets/js/vendor/bootstrap.min.js"></script>

<!-- Plugin JavaScript -->
<script src="/assets/js/vendor/jquery.easing.min.js"></script>
<script src="/assets/js/vendor/jquery.validate.min.js"></script>
<script src="/assets/js/vendor/DataTables-1.10.7/media/js/jquery.dataTables.min.js"></script>
<script src="/assets/js/vendor/DataTables-1.10.7/Plugins-1.10.7/integration/bootstrap/3/dataTables.bootstrap.min.js"></script>
<script src="/assets/js/vendor/jsrender.min.js"></script>




<script src="/assets/js/vendor/c3.js"></script>
<script src="/assets/js/vendor/moment.js"></script>
<script src="/assets/js/vendor/selectize.min.js"></script>

<!-- utilities -->
<script src="/assets/js/vendor/toTitleCase.js"></script>

<!-- Custom site JavaScript -->
<script src="/assets/js/datasf.js"></script>


    </body>
</html>
